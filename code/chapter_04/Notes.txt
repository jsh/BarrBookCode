The code in this directory now works for me.

Most Scripts Run from Command Line
-----------------------------------

I've converted the scripts to work with the AWSSDKforPHP toolkit.  Most will now run correctly from the command line.

Some scripts required minor bug fixes to run correctly.  In other cases, there are now easier ways to do the programs, but I've avoided the temptation to fix them if the current versions work. My goal is minimum change to maximize compatibility with the book.

It is not necessary to set BOOK_BUCKET, in include/book.inc.php: all scripts should allow you to specify a bucket on the command line.

One conversion that does not yet work correctly is calls to create_object that set the acl. The documentation says to convert the global constants, S3_ACL_*, to class constants -- either AmazonS3::ACL_* or $s3::ACL_* depending on where you read. I couldn't get this to work because I don't know enough PHP, so I modified the call in book.inc.php to ignore that parameter and take the default, ACL_PRIVATE.

If you can fix this, please do.

Three Scripts Don't Work from the Command Line
----------------------------------------------

Some scripts in this directory aren't meant to be run from the command line.

list_bucket_objects_page.php
list_bucket_objects_page_thumbs.php
list_buckets_page.php

They have no shebang (#!) line, and their names all have "_page".  They generate web pages.

Making the "_page" Scripts Work
-------------------------------

+ install a web browser

sudo apt-get install apache2

There's instructions on how to get this all set up hither and yon that I won't duplicate. Google's your friend.

+ put the files into /var/www

cd code/chapter_04
sudo cp -r include *_page* /var/www

+ Once you have buckets, and objects in them, go visit these pages in your browser

firefox http://localhost/list_buckets_page.php
firefox http://localhost/list_bucket_objects_page.php?bucket=<your-bucket-name-here>


Is there a better way to do all this? Show me how.
